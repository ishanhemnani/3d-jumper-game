<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Platform Jumper - Vibe Game 2025</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/wallet.css">

    <!-- Environment config (must be loaded first) -->
    <script src="/env-config.js"></script>
    
    <!-- External dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Solana dependencies -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/buffer@6.0.3/index.min.js"></script>
    
    <!-- Application scripts -->
    <script src="../config/supabase.js"></script>
    <script src="../config/supabase-init.js"></script>
    <script src="../src/game.js" type="module"></script>
    
    <script>
        // Buffer polyfill
        window.Buffer = window.Buffer || require('buffer').Buffer;
        
        // Global window functions for game to work with
        window.isPlaying = false;
    </script>
</head>
<body>
    <!-- Start screen -->
    <div id="start-screen" class="start-screen">
        <div class="logo">
            <h1>Platform Jumper</h1>
            <div class="tagline">A Vibe Game 2025 Entry</div>
        </div>
        
        <div class="menu">
            <button id="start-button" class="menu-button">Start Game</button>
            <button id="infinity-button" class="menu-button">Infinity Mode</button>
            <button id="leaderboard-button" class="menu-button">Leaderboard</button>
            <button id="settings-button" class="menu-button">Settings</button>
        </div>
        
        <div class="attribution">Created by Aditya Sharma</div>
    </div>
    
    <!-- Game container -->
    <div id="game-container" class="game-container">
        <canvas id="game-canvas"></canvas>
        
        <!-- Game UI overlay -->
        <div id="game-ui" class="game-ui">
            <div class="score-container">
                <div>Score: <span id="score-value">0</span></div>
                <div>Coins: <span id="coins-value">0</span></div>
                <div>Level: <span id="level-value">1</span></div>
            </div>
        </div>
        
        <!-- Level complete screen -->
        <div id="level-complete" class="level-complete">
            <h2>Level 1 Complete!</h2>
            <div id="level-stats" class="level-stats"></div>
            <button id="next-level-button" class="next-level-button">Start Level 2</button>
        </div>
        
        <!-- Game over screen -->
        <div id="game-over" class="game-over">
            <h2>Game Over</h2>
            <div id="final-score">Final Score: 0</div>
            <button id="restart-button" class="restart-button">Play Again</button>
        </div>
    </div>
    
    <!-- Infinity mode difficulty selection -->
    <div id="infinity-mode-select" class="infinity-mode-select">
        <h2>Select Difficulty</h2>
        <div class="difficulty-buttons">
            <button id="easy-mode" class="difficulty-button easy">Easy</button>
            <button id="medium-mode" class="difficulty-button medium">Medium</button>
            <button id="hard-mode" class="difficulty-button hard">Hard</button>
        </div>
        <button id="back-button" class="back-button">Back</button>
    </div>
    
    <!-- Infinity game over screen -->
    <div id="infinity-game-over" class="infinity-game-over">
        <h2>Game Over</h2>
        <div class="infinity-score">
            <div>Distance: <span id="infinity-distance">0</span></div>
            <div>Coins: <span id="infinity-coins">0</span></div>
            <div>Score: <span id="infinity-score">0</span></div>
        </div>
        <div class="name-input">
            <input type="text" id="player-name" placeholder="Enter your name">
        </div>
        <button id="infinity-submit-button" class="submit-button">Submit Score</button>
        <button id="infinity-restart-button" class="restart-button">Play Again</button>
    </div>
    
    <!-- Leaderboard screen -->
    <div id="leaderboard-screen" class="leaderboard-screen">
        <h2>Leaderboard</h2>
        <div class="tabs">
            <button class="tab-button active" data-difficulty="easy">Easy</button>
            <button class="tab-button" data-difficulty="medium">Medium</button>
            <button class="tab-button" data-difficulty="hard">Hard</button>
        </div>
        <table id="leaderboard-table" class="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Score</th>
                    <th>Coins</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                <tr>
                    <td colspan="4">Loading...</td>
                </tr>
            </tbody>
        </table>
        <button id="leaderboard-back-button" class="back-button">Back</button>
    </div>
    
    <!-- Settings screen -->
    <div id="settings-screen" class="settings-screen">
        <h2>Settings</h2>
        <div class="settings-content">
            <div class="setting-item">
                <label for="music-volume">Music Volume</label>
                <input type="range" id="music-volume" min="0" max="100" value="50">
            </div>
            <div class="setting-item">
                <label for="sfx-volume">SFX Volume</label>
                <input type="range" id="sfx-volume" min="0" max="100" value="80">
            </div>
            <div class="setting-item">
                <label for="camera-sensitivity">Camera Sensitivity</label>
                <input type="range" id="camera-sensitivity" min="1" max="10" value="5">
            </div>
            <div class="setting-item checkbox">
                <input type="checkbox" id="show-fps" checked>
                <label for="show-fps">Show FPS</label>
            </div>
        </div>
        <button id="settings-back-button" class="back-button">Back</button>
    </div>
    
    <!-- Mobile controls -->
    <div id="mobile-controls" class="mobile-controls">
        <div id="joystick-container"></div>
        <button id="jump-button" class="jump-button">Jump</button>
    </div>
</body>
</html>